<!DOCTYPE html>
<html>
<head>
    <title>Markdown Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/react-markdown@9.0.1/dist/react-markdown.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script>
        const { createElement: h } = React;
        const ReactMarkdown = window.ReactMarkdown;
        
        const testContent = `# Test Blog

Hier ist ein Test-Bild:

![Test Bild](https://via.placeholder.com/300x200/0066cc/ffffff?text=Test+Bild)

Das Bild sollte oben angezeigt werden.`;

        const MarkdownRenderer = ({ content }) => {
            return h('div', { className: 'prose' },
                h(ReactMarkdown, {
                    components: {
                        img: ({ src, alt, ...props }) => {
                            console.log('Rendering image:', src, alt);
                            return h('div', { className: 'my-6 flex justify-center' },
                                h('img', {
                                    src: src,
                                    alt: alt || '',
                                    className: 'max-w-full h-auto rounded-lg shadow-md border',
                                    loading: 'lazy',
                                    onError: (e) => {
                                        console.error('Image failed to load:', src);
                                        e.currentTarget.style.display = 'none';
                                    },
                                    onLoad: () => {
                                        console.log('Image loaded successfully:', src);
                                    },
                                    ...props
                                })
                            );
                        },
                        a: ({ href, children }) => {
                            console.log('Rendering link:', href, children);
                            return h('a', {
                                href: href,
                                className: 'text-blue-500 underline',
                                target: '_blank',
                                rel: 'noopener noreferrer'
                            }, children);
                        }
                    }
                }, content)
            );
        };

        ReactDOM.render(
            h(MarkdownRenderer, { content: testContent }),
            document.getElementById('root')
        );
    </script>
</body>
</html>
